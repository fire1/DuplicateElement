(function(a){a.fn.duplicateElement=function(c){c=a.extend(a.fn.duplicateElement.defaults,c);var b=this;var d=a(b).parent();return this.each(function(){var f=a(this);var e=document.createElement(c.tag_name);e.setAttribute("id",c.tag_id);f[0].parentNode.appendChild(e);a(f).parent().on("click",c.class_create,function(i){var h=a(this).parents(".dinamic-field");var g=a(this).parents(b);if(h.length>0){var j=h.clone()}else{if(g.length>0){var j=g.find(b).clone().addClass("dinamic-field")}}j.appendTo("#"+c.tag_id);d.find(c.class_remove).show();d.find(c.class_remove).last().hide();d.find(c.class_create).hide();d.find(c.class_create).last().show();if(typeof c.onCreate==="function"){c.onCreate(j,a(this),i)}i.preventDefault();return false});f.find(c.class_remove).first().hide();a(f).parent().on("click",c.class_remove,function(i){var h=a(this).parents(".dinamic-field");var g=a(this).parents(f);if(h.length>0){h.remove()}else{if(g.length>0){a(f).empty();a(f).hide()}}if(typeof c.onRemove==="function"){c.onRemove(a(this))}i.preventDefault();return false})})};a.fn.duplicateElement.defaults={tag_name:"div",tag_id:"dinamic-fields",clone_model:"#clone-field-model",class_remove:".remove-this-fields",class_create:".create-new-fields",onCreate:"",onRemove:""}})(jQuery);